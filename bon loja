<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Bitcoin Vision Ultimate</title>
<style>
body {margin:0; background:#111; overflow:hidden; font-family: monospace; touch-action: manipulation;}
.screen {position:fixed; top:0; left:0; right:0; bottom:0; display:flex; flex-direction:column; justify-content:center; align-items:center; color:#0f0; font-size:24px; background:#111;}
#startScreen input {padding:10px; font-size:18px; border-radius:6px; border:1px solid #0f0; margin-top:10px; background:#111; color:#0f0; outline:none; caret-color:#0f0;}
#startScreen button, #quickRestartBtn {padding:10px 20px; font-size:18px; margin-top:20px; border-radius:8px; background:#0f0; color:#000; font-weight:bold; cursor:pointer;}
#player {position:absolute; left:50%; top:50%; font-size:40px; width:50px; height:50px; line-height:50px; text-align:center; user-select:none; pointer-events:none; transition: transform 0.1s ease, color 0.3s ease, text-shadow 0.3s ease; display:none;}
.enemy, .coin {position:absolute; display:none; align-items:center; justify-content:center; font-weight:bold; font-family: monospace;}
.enemy {width:50px; height:50px; border-radius:8px; background: linear-gradient(to bottom, #900,#600); box-shadow:0 0 10px #f00; color:white; font-size:18px; text-align:center; line-height:50px;}
.coin {width:35px; height:35px; border-radius:50%; background: radial-gradient(circle, #f2a900, #c68600); color:white; font-size:14px; text-align:center; line-height:35px; animation:coinGlow 1s infinite alternate;}
@keyframes coinGlow {0% {box-shadow:0 0 8px gold; transform:scale(1);} 100% {box-shadow:0 0 20px gold; transform:scale(1.15);}}
#display {position:fixed; bottom:50px; left:0; right:0; text-align:center; color:#0f0; font-size:18px;}
#progressBarContainer {position:fixed; bottom:10px; left:10px; width:calc(100% - 20px); height:20px; background:#222; border-radius:10px; overflow:hidden;}
#progressBar {width:0%; height:100%; background:#0f0;}
.levelUpText {position:absolute; color:#0f0; font-size:24px; font-weight:bold; animation:floatUp 1s ease forwards;}
@keyframes floatUp {0% {transform: translateY(0px); opacity:1;} 100% {transform: translateY(-50px); opacity:0;}}
#gameOverScreen {display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:#000; color:#f00; font-family: monospace; display:flex; flex-direction:column; justify-content:center; align-items:center; font-size:24px; z-index:9999;}
#gameOverScreen h1 {font-size:48px; margin:0 0 20px 0; letter-spacing:5px; animation:gameOverGlow 1s infinite alternate;}
@keyframes gameOverGlow {0% {text-shadow:0 0 10px #f00; color:#f00;} 100% {text-shadow:0 0 25px #ff5555,0 0 50px #f00; color:#ff5555;}}
#gameOverScreen p {margin:5px 0;}
#restartBtn, #quickRestartBtn {margin-top:10px; padding:10px 20px; background:#0f0; color:#000; font-weight:bold; border:none; border-radius:8px; font-size:18px;}
#restartBtn:active, #quickRestartBtn:active {transform:scale(0.95);}
#highscoreList {margin-top:15px; color:#0f0; text-align:center;}
.spark {position:absolute; width:6px; height:6px; background:yellow; border-radius:50%; box-shadow:0 0 8px yellow; pointer-events:none; animation:sparkAnim 0.5s forwards;}
@keyframes sparkAnim {0% {transform: translate(0,0) scale(1); opacity:1;} 100% {transform: translate(calc(var(--dx)*10px), calc(var(--dy)*10px)) scale(0.2); opacity:0;}}
.comboText {position:absolute; color:#0ff; font-size:24px; font-weight:bold; text-shadow:0 0 8px #0ff,0 0 20px #0ff; animation:comboAnim 0.8s forwards; pointer-events:none;}
@keyframes comboAnim {0% {transform: translate(-50%,-50%) scale(1); opacity:1;} 100% {transform: translate(-50%,-80%) scale(1.5); opacity:0;}}
</style>
</head>
<body>

<div id="startScreen" class="screen">
<h1>BITCOIN VISION ULTIMATE</h1>
<label>Fut Emrin (mund logo/emoji):</label>
<input type="text" id="playerName" placeholder="ðŸ’ŽLojtari">
<button id="startBtn">Start Game</button>
</div>

<div id="player"></div>
<div id="display">PikÃ«: 0 | Level: 1</div>
<div id="progressBarContainer"><div id="progressBar"></div></div>

<div id="gameOverScreen">
<h1>GAME OVER</h1>
<p id="finalScore">PikÃ«: 0</p>
<p id="finalLevel">Level: 1</p>
<div id="highscoreList"></div>
<button id="restartBtn">Restart & New Name</button>
<button id="quickRestartBtn">Quick Restart</button>
</div>

<!-- Sounds -->
<audio id="coinSound"><source src="https://www.soundjay.com/button/beep-01a.wav" type="audio/wav"></audio>
<audio id="levelUpSound"><source src="https://www.soundjay.com/button/beep-05.wav" type="audio/wav"></audio>
<audio id="gameOverSound"><source src="https://www.soundjay.com/button/beep-10.wav" type="audio/wav"></audio>
<audio id="enemyHitSound"><source src="https://www.soundjay.com/button/button-10.wav" type="audio/wav"></audio>

<script>
const startScreen=document.getElementById("startScreen");
const startBtn=document.getElementById("startBtn");
const playerNameInput=document.getElementById("playerName");
const playerEl=document.getElementById("player");
const display=document.getElementById("display");
const progressBar=document.getElementById("progressBar");
const coinSound=document.getElementById("coinSound");
const levelUpSound=document.getElementById("levelUpSound");
const gameOverSound=document.getElementById("gameOverSound");
const enemyHitSound=document.getElementById("enemyHitSound");
const gameOverScreen=document.getElementById("gameOverScreen");
const finalScore=document.getElementById("finalScore");
const finalLevel=document.getElementById("finalLevel");
const restartBtn=document.getElementById("restartBtn");
const quickRestartBtn=document.getElementById("quickRestartBtn");
const highscoreListEl=document.getElementById("highscoreList");

let playerName="", score=0, level=1, enemies=[], coins=[];
const POINTS_PER_LEVEL=25;
let highscoreList=JSON.parse(localStorage.getItem("highscoreList")||"[]");
let lastCoinTime=0, comboCount=0;

const levelEmojis = ["ðŸ˜ˆ","ðŸ‘¹","ðŸ˜º","ðŸ¤–","ðŸ‘»","ðŸ§›","ðŸ§Ÿ","ðŸ¦¹","ðŸ¦‡","ðŸ‰","ðŸ²","ðŸ¦–","ðŸ‘½","ðŸ‘¾","ðŸ¦‘","ðŸ¦€","ðŸ","ðŸ¦ˆ","ðŸŠ","ðŸ¦…","ðŸ¦„","ðŸ¢","ðŸ¦•","ðŸ™","ðŸ¦"];
const levelGlowColors = ["#0f0","#ff00ff","#00ffff","#ff4500","#ffff00","#ff1493","#00ff7f","#00bfff","#ff8c00","#8a2be2","#7fff00","#ff6347","#00ced1","#ff69b4","#ffd700","#00fa9a","#9400d3","#ff4500","#1e90ff","#32cd32","#ff1493","#00ffff","#ff6347","#adff2f","#ff00ff"];

function startGame(){
  playerName = playerNameInput.value.trim() || "ðŸ’ŽAnonim";
  startScreen.style.display = "none";
  playerEl.style.display = "block";
  score = 0; level = 1;
  display.innerText = `PikÃ«: ${score} | Level: ${level}`;
  playerEl.style.left = "50%"; playerEl.style.top = "50%";
  updatePlayer(level);
  startLevel(level);
}

startBtn.addEventListener("click", startGame);

function updatePlayer(lvl){
  playerEl.innerText = levelEmojis[(lvl-1)%levelEmojis.length];
  const color = levelGlowColors[(lvl-1)%levelGlowColors.length];
  playerEl.style.color = color;
  playerEl.style.textShadow = `0 0 5px ${color}, 0 0 15px ${color}, 0 0 30px ${color}`;
}

function startLevel(lvl){
  updatePlayer(lvl);
  enemies.forEach(e=>e.remove()); coins.forEach(c=>c.remove()); enemies=[]; coins=[];
  const numEnemies = 2+lvl; const numCoins = 5+lvl;

  for(let i=0;i<numEnemies;i++){
    let e = document.createElement("div");
    e.className="enemy";
    e.textContent="X";
    e.style.display="block";
    document.body.appendChild(e);
    randomPosition(e,50);
    e.dx=(Math.random()-0.5)*(1+lvl*0.5);
    e.dy=(Math.random()-0.5)*(1+lvl*0.5);
    enemies.push(e);
  }

  for(let i=0;i<numCoins;i++){
    let c = document.createElement("div");
    c.className="coin";
    c.innerText="â‚¿";
    c.style.display="block";
    document.body.appendChild(c);
    randomPosition(c,35);
    c.dx=(Math.random()-0.5)*(1+lvl*0.2);
    c.dy=(Math.random()-0.5)*(1+lvl*0.2);
    coins.push(c);
  }

  updateProgressBar();
}

function randomPosition(el,size){el.style.left=Math.random()*(window.innerWidth-size)+"px"; el.style.top=Math.random()*(window.innerHeight-size)+"px";}
function createSpark(x,y){for(let i=0;i<8;i++){const spark=document.createElement("div"); spark.className="spark"; spark.style.setProperty('--dx',(Math.random()-0.5)*2); spark.style.setProperty('--dy',(Math.random()-0.5)*2); spark.style.left=x+"px"; spark.style.top=y+"px"; document.body.appendChild(spark); setTimeout(()=>spark.remove(),500);}}
function showCombo(x,y){const now=Date.now(); if(now-lastCoinTime<500){comboCount++;}else{comboCount=1;} lastCoinTime=now; if(comboCount>1){const combo=document.createElement("div"); combo.className="comboText"; combo.innerText=`COMBO x${comboCount}!`; combo.style.left=x+"px"; combo.style.top=y+"px"; document.body.appendChild(combo); setTimeout(()=>combo.remove(),800);}}
function pulsePlayer(){playerEl.style.transform="scale(1.3)"; setTimeout(()=>{playerEl.style.transform="scale(1)";},100);}

document.addEventListener("touchstart",(e)=>{
  if(startScreen.style.display==="none" && gameOverScreen.style.display==="none"){
    let touch=e.touches[0]; playerEl.style.left=touch.clientX+"px"; playerEl.style.top=touch.clientY+"px";
    const px=parseInt(playerEl.style.left), py=parseInt(playerEl.style.top);
    coins.forEach(c=>{
      const cx=parseInt(c.style.left), cy=parseInt(c.style.top);
      if(Math.abs(px-cx)<25 && Math.abs(py-cy)<25){
        score++; coinSound.play(); display.innerText=`PikÃ«: ${score} | Level: ${level}`;
        randomPosition(c,35); createSpark(cx,cy); showCombo(cx,cy); pulsePlayer(); updateProgressBar();
        if(score%POINTS_PER_LEVEL===0 && level<25){level++; startLevel(level); showLevelUp(level); levelUpSound.play();}
      }
    });
  }
});

function updateProgressBar(){let currentLevelPoints=score%POINTS_PER_LEVEL; progressBar.style.width=(currentLevelPoints/POINTS_PER_LEVEL)*100+"%";}
function showLevelUp(lvl){const txt=document.createElement("div"); txt.className="levelUpText"; txt.innerText=`LEVEL ${lvl}!`; document.body.appendChild(txt); txt.style.left="50%"; txt.style.top="50%"; txt.style.transform="translate(-50%,-50%)"; setTimeout(()=>{txt.remove();},1000);}
function triggerGameOver(){gameOverSound.play(); finalScore.innerText=`PikÃ«: ${score}`; finalLevel.innerText=`Level: ${level}`; highscoreList.push({name:playerName, score:score}); highscoreList.sort((a,b)=>b.score-a.score); if(highscoreList.length>5) highscoreList=highscoreList.slice(0,5); localStorage.setItem("highscoreList",JSON.stringify(highscoreList)); highscoreListEl.innerHTML="<strong>Highscores:</strong><br>"+highscoreList.map(h=>`${h.name}: ${h.score}`).join("<br>"); gameOverScreen.style.display="flex";}

// Restart
restartBtn.addEventListener("click",()=>{gameOverScreen.style.display="none"; startScreen.style.display="flex"; enemies.forEach(e=>e.remove()); coins.forEach(c=>c.remove()); enemies=[]; coins=[]; score=0; level=1; display.innerText=`PikÃ«: ${score} | Level: ${level}`; progressBar.style.width="0%"; playerEl.style.left="50%"; playerEl.style.top="50%"; playerEl.style.display="none";});
quickRestartBtn.addEventListener("click",()=>{gameOverScreen.style.display="none"; enemies.forEach(e=>e.remove()); coins.forEach(c=>c.remove()); enemies=[]; coins=[]; score=0; level=1; display.innerText=`PikÃ«: ${score} | Level: ${level}`; progressBar.style.width="0%"; playerEl.style.left="50%"; playerEl.style.top="50%"; startLevel(level); playerEl.style.display="block";});

// Move
function moveAll(){
  enemies.forEach(e=>{
    let x=parseFloat(e.style.left), y=parseFloat(e.style.top);
    x+=e.dx; y+=e.dy;
    if(x<0||x>window.innerWidth-50)e.dx*=-1;
    if(y<0||y>window.innerHeight-50)e.dy*=-1;
    e.style.left=x+"px"; e.style.top=y+"px";
    const px=parseInt(playerEl.style.left), py=parseInt(playerEl.style.top);
    if(Math.abs(px-x)<25 && Math.abs(py-y)<25){
      enemyHitSound.play(); // sound kur prek enemy
      triggerGameOver();
    }
  });
  coins.forEach(c=>{ let x=parseFloat(c.style.left), y=parseFloat(c.style.top); x+=c.dx; y+=c.dy; if(x<0||x>window.innerWidth-35)c.dx*=-1; if(y<0||y>window.innerHeight-35)c.dy*=-1; c.style.left=x+"px"; c.style.top=y+"px";});
}
setInterval(moveAll,50);
</script>

</body>
</html>